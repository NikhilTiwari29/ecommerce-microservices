spring.application.name=product-service

spring.mongodb.host=localhost
spring.mongodb.port=27017
spring.mongodb.database=product-service

spring.messages.basename=messages

# ============================================================
# Central Swagger UI & OpenAPI Aggregation Configuration
#
# Goal:
#   Combine the API documentation of all microservices into
#   a single Swagger UI exposed by the API Gateway.
#
# Architecture:
#   - Each microservice exposes its OpenAPI spec at /api-docs
#   - The gateway defines public /aggregate/... endpoints that
#     proxy those specs
#   - Swagger UI is configured to fetch specs ONLY via the gateway
#
# Result:
#   Developers use one UI to explore all APIs, without needing
#   to know internal service URLs.
# ============================================================


# Expose a single Swagger UI for all microservices at the gateway
# Example: http://localhost:8083/swagger-ui.html
springdoc.swagger-ui.path=/swagger-ui.html

# Standardize the OpenAPI JSON endpoint used by all backend services
# (Springdoc default is /v3/api-docs, but we use /api-docs for consistency)
springdoc.api-docs.path=/api-docs

#The Swagger UI dropdown is populated from the springdoc.swagger-ui.urls configuration,
# and the UI content for each selection is rendered dynamically based on the OpenAPI JSON returned from the
# corresponding /aggregate/... endpoint.

# -----------------------
# Product Service Docs
# -----------------------
# When "Product Service" is selected in the combined Swagger UI on the API Gateway:
#   1. Swagger UI calls: /aggregate/product-service/v3/api-docs   (on the gateway)
#   2. The gateway routes this request to the Product Service (routing defined in application.yml)
#   3. The gateway rewrites the path to /api-docs before forwarding and Forwards the request to: http://localhost:8080/api-docs
#   4. The Product Service responds with its OpenAPI JSON
springdoc.swagger-ui.urls[0].name=Product Service
springdoc.swagger-ui.urls[0].url=/aggregate/product-service/v3/api-docs


# -----------------------
# Order Service Docs
# -----------------------
# When "Order Service" is selected in the combined Swagger UI on the API Gateway:
#   1. Swagger UI calls: /aggregate/order-service/v3/api-docs     (on the gateway)
#   2. The gateway routes this request to the Order Service (routing defined in application.yml)
#   3. The gateway rewrites the path to /api-docs before forwarding and Forwards the request to: http://localhost:8081/api-docs
#   4. The Order Service responds with its OpenAPI JSON
springdoc.swagger-ui.urls[1].name=Order Service
springdoc.swagger-ui.urls[1].url=/aggregate/order-service/v3/api-docs


# -----------------------
# Inventory Service Docs
# -----------------------
# When "Inventory Service" is selected in the combined Swagger UI on the API Gateway:
#   1. Swagger UI calls: /aggregate/inventory-service/v3/api-docs (on the gateway)
#   2. The gateway routes this request to the Inventory Service (routing defined in application.yml)
#   3. The gateway rewrites the path to /api-docs before forwarding and Forwards the request to: http://localhost:8082/api-docs
#   4. The Inventory Service responds with its OpenAPI JSON
springdoc.swagger-ui.urls[2].name=Inventory Service
springdoc.swagger-ui.urls[2].url=/aggregate/inventory-service/v3/api-docs


management.endpoints.web.exposure.include=health, info, metrics, prometheus
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.observations.key-values.application=product-service

management.tracing.sampling.probability=1.0

# Loki URL
loki.url=http://localhost:3100/loki/api/v1/push